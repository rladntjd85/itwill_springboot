<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
		xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
		layout:decorate="~{layouts/layout}">
<head>
	<!-- 개별페이지 CSS 영역 -->
	<th:block layout:fragment="style">
		<link rel="stylesheet" th:href="@{/css/item_main.css}" />
		<style>
			#imgPreviewArea {
				display: flex;
				flex-wrap: wrap;
				gap: 10px;
				width: 100%;
			}
			
			.div-img-preview {
				display: flex;
				flex-direction: column;
				align-items: center;
			}
		
			.img-preview {
				width: 100px;
				height: 100px;
				display: block;
			}
			
			.itemImg {
				display: inline-block;
			}
			
			.itemImg img {
				width: 100px;
				height: 100px;
			}
			
			.itemTr:hover {
				background-color: orange;
			}
		</style>
	</th:block>
</head>	
<body>
	<section layout:fragment="content">
		<h3>상품 목록</h3>
		<table border="1">
			<tr>
				<th>상품번호</th>
				<th>상품명</th>
				<th>상품가격</th>
				<th>수량</th>
				<th>등록일시</th>
<!-- 				<th>첨부파일</th> -->
			</tr>
			<!-- 상품목록 1개 클릭 시 이벤트 핸들링 -->
			<!-- 상품 번호에 접근하기 위해 th:data-xxx 속성을 사용하여 상품번호를 tr 태그 등에 포함시킬 수 있다! -->
			<!-- 이 때, HTML5 표준 네이밍 규칙에 따라 소문자, 숫자, 하이픈 조합 가능 -->
			<!-- 주의! data-xxx 의 xxx 이 xxx-yyy 형태일 경우 JS/jQuery 에서 접근 시 Camel-case 형태로 자동 변환됨 -->
			<tr th:each="itemDTO : ${itemDTOList}" th:object="${itemDTO}" class="itemTr" th:data-item-id="*{id}">
				<td th:text="*{id}"></td>
				<td th:text="*{itemNm}"></td>
				<td th:text="*{price}"></td>
				<td th:text="*{stockQty}"></td>
				<td th:text="*{regTime}"></td>
<!-- 				<td> -->
<!-- 					<th:block th:each="itemImgDTO : *{itemImgDTOList}"> -->
<!-- 						<div th:text="${itemImgDTO.id}"></div> -->
<!-- 						<div th:text="${itemImgDTO.imgLocation}"></div> -->
<!-- 						<div th:text="${itemImgDTO.imgName}"></div> -->
<!-- 						<div th:text="${itemImgDTO.originalImgName}"></div> -->
<!-- 						<div th:text="${itemImgDTO.repImgYn}"></div> -->
<!-- 						<hr> -->
<!-- 					</th:block> -->
<!-- 				</td> -->
			</tr>
		</table>
	</section>
	
	<!-- 개별 페이지의 자바스크립트 영역 -->
	<th:block layout:fragment="script">
		<script>
			$(function() {
				// 상품 목록에서 상품 클릭 시 상세정보 조회 요청
				$(".itemTr").click(function() {
					// 클릭한 tr 태그의 th:data-id 속성값 가져오기
// 					const itemId = $(this).data("id");
					// th:data-item-id 속성값 가져오기
// 					const itemId = $(this).data("itemId"); 
// 					console.log("itemId(item-id) : " + itemId);
					const itemId = this.dataset.itemId;
// 					console.log("itemId(this.dataset.itemId) : " + itemId);

					location.href = `/items/${itemId}`;
				});
			});
		</script>
	</th:block>
</body>
</html>















